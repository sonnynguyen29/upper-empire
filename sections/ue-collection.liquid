{{ 'ue-collection.css' | asset_url | stylesheet_tag }}
<link rel="stylesheet" href="https://unpkg.com/aos@next/dist/aos.css">
<script src="https://unpkg.com/aos@next/dist/aos.js"></script>

<section id="ue-collection">
  <div class="container">
    {% if section.settings.header != blank %}
      <div class="ue-collection-header">
        <h2 class="ue-collection__title">{{ section.settings.header }}</h2>
        {% if section.settings.sub_header %}
          <p>{{ section.settings.sub_header }}</p>
        {% endif %}
      </div>
    {% endif %}
    <div class="ue-collection-grid">
      {% for block in section.blocks %}
        {% if block.settings.image %}
          {% liquid
            assign delay_time = 50
            if forloop.index > 10 or section.settings.is_first_section == false
              assign delay_time = 5
            endif
            assign delay_time = delay_time | times: forloop.index
          %}

          <a
            href="{{ block.settings.image.src | image_url }}"
            class="ue-collection-item"
            data-image-id="{{ block.settings.image.id }}" 
            data-image-url="{{ block.settings.image.src | image_url }}"
            data-image-text="{{ block.settings.text }}"
            data-text-color="{{ block.settings.text_color }}"
            data-aos="fade-up"
            data-aos-offset="-400"
            data-aos-delay="{{ delay_time }}"
            data-aos-duration="800"
            data-aos-easing="ease-in-out"
            data-aos-mirror="true"
            data-aos-once="true"
            data-aos-anchor-placement="top-center"
            target="_blank"
            data-pswp-width="{{ block.settings.image.width }}"
            data-pswp-height="{{ block.settings.image.height }}"
          >
            {% render 'responsive-image' with block.settings.image, alt: block.settings.image.alt | escape -%}
            {% if block.settings.text %}
              <!-- <div class="ue-collection-item-text" style="color: {{ block.settings.text_color }}">
                {{ block.settings.text }}
              </div> -->
            {% endif %}
          </a>
        {% endif %}
      {% endfor %}
    </div>
  </div>
</section>

<script src="{{ 'ue-collection-gallery.js' | asset_url }}" defer></script>

{% schema %}
{
  "name": "UE Collection",
  "class": "ue-collection-wrapper",
  "settings": [
    {
      "type": "text",
      "id": "header",
      "label": "Header",
      "default": "UE Collection"
    },
    {
      "type": "text",
      "id": "sub_header",
      "label": "Sub Header"
    },
    {
      "type": "checkbox",
      "id": "is_first_section",
      "label": "Is First Section",
      "default": false
    }
  ],
  "blocks": [
    {
      "type": "image-item",
      "name": "Image item",
      "settings": [
        {
          "type": "text",
          "id": "link",
          "label": "Link",
          "default": "https://www.upperempire.com"
        },
        {
          "type": "image_picker",
          "id": "image",
          "label": "Image"
        },
        {
          "type": "richtext",
          "id": "text",
          "label": "Text",
          "default": "<p>Product Text</p>"
        },
        {
          "type": "color",
          "id": "text_color",
          "label": "Text Color",
          "default": "#000000"
        }
      ]
    }
  ]
}
{% endschema %}
